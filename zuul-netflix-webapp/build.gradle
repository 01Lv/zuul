apply plugin: 'java'
apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'war'
apply plugin: 'jetty'

dependencies {

    compile project(':zuul-core')
    compile project(':zuul-netflix')

    compile 'com.netflix.karyon:karyon-core:latest.release'
    compile 'com.netflix.karyon:karyon-admin:latest.release'
    compile 'com.netflix.karyon:karyon-admin-web:latest.release'
    compile 'com.netflix.karyon:karyon-extensions:latest.release'
    compile 'com.netflix.blitz4j:blitz4j:latest.release'
    compile 'com.sun.jersey:jersey-core:+'
    compile 'com.sun.jersey:jersey-server:+'
    compile 'com.sun.jersey:jersey-client:+'
    compile 'com.sun.jersey:jersey-servlet:+'

    groovy "org.codehaus.groovy:groovy-all:2.2.2"
}

javadoc {
    options {
        doclet = "org.benjchristensen.doclet.DocletExclude"
        docletpath = [rootProject.file('./gradle/doclet-exclude.jar')]
        stylesheetFile = rootProject.file('./gradle/javadocStyleSheet.css')
        windowTitle = "Zuul Javadoc ${project.version}"
    }
}

eclipse {
    classpath {
        plusConfigurations += configurations.provided
        downloadSources = true
        downloadJavadoc = true
    }
}


idea {
    module {
        languageLevel = '1.7'
        scopes.PROVIDED.plus += configurations.provided
    }
}

war {
    webXml = file('src/main/webapp/WEB-INF/web.xml')
    webInf{
        from('src/main/groovy/filters') {
            into('classes')
        }
    }
}

jettyRun.contextPath = '/'

jettyRun.doFirst {
    System.setProperty("archaius.deployment.applicationId", "zuul")
}
